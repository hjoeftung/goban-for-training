(function(e){function t(t){for(var o,i,r=t[0],n=t[1],a=t[2],u=0,w=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&w.push(s[i][0]),s[i]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);h&&h(t);while(w.length)w.shift()();return c.push.apply(c,a||[]),l()}function l(){for(var e,t=0;t<c.length;t++){for(var l=c[t],o=!0,r=1;r<l.length;r++){var n=l[r];0!==s[n]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=l[0]))}return e}var o={},s={app:0},c=[];function i(t){if(o[t])return o[t].exports;var l=o[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=o,i.d=function(e,t,l){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(l,o,function(t){return e[t]}.bind(null,o));return l},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/goban/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var a=0;a<r.length;a++)t(r[a]);var h=n;c.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"02dc":function(e,t,l){},"034f":function(e,t,l){"use strict";var o=l("85ec"),s=l.n(o);s.a},"56d7":function(e,t,l){"use strict";l.r(t);l("e260"),l("e6cf"),l("cca6"),l("a79d");var o,s=l("2b0e"),c=l("2f62"),i=l("5f5b"),r=(l("a347"),{size:19,showCoords:!0,preset:null,isBlacksMove:!0,blind:!1,colorless:!1,captives:{black:0,white:0},names:{black:"",white:""},currName:""}),n=l("5530"),a={size:function(e){return e.size},isBlacksMove:function(e){return e.isBlacksMove},blind:function(e){return e.blind},colorless:function(e){return e.colorless},captives:function(e){return Object(n["a"])({},e.captives)},names:function(e){return Object(n["a"])({},e.names)},showCoords:function(e){return e.showCoords},currName:function(e){return e.currName},allowedToPlay:function(e){return!(!e.isBlacksMove||!e.names.black||e.names.black!==e.currName)||!(e.isBlacksMove||!e.names.white||e.names.white!==e.currName)}},h=(l("b0c0"),l("ade3")),u="NEW_GAME",w="SET_PRESETS",d="REVERT_MOVE",b="SWITCH_MOVE",v="TOGGLE_BLIND",f="TOGGLE_COLORLESS",p="CHANGE_SIZE",m="CHANGE_CAPTIVES",g="CHANGE_NAME",k="WHITE_FIRST",_="TOGGLE_COORDS",C="TOGGLE_SEAT",O=(o={},Object(h["a"])(o,u,(function(e){e.isBlacksMove=!0,e.captives.black=0,e.captives.white=0,e.blind=!1,e.colorless=!1,e.names.black="",e.names.white=""})),Object(h["a"])(o,w,(function(e,t){e.preset=t})),Object(h["a"])(o,k,(function(e){e.isBlacksMove=!1})),Object(h["a"])(o,b,(function(e){e.isBlacksMove=!e.isBlacksMove})),Object(h["a"])(o,d,(function(e){e.isBlacksMove=!e.isBlacksMove})),Object(h["a"])(o,p,(function(e,t){e.size=t})),Object(h["a"])(o,g,(function(e,t){e.currName=t})),Object(h["a"])(o,m,(function(e,t){e.captives[t.color]=t.number})),Object(h["a"])(o,v,(function(e){e.blind=!e.blind})),Object(h["a"])(o,f,(function(e){e.colorless=!e.colorless})),Object(h["a"])(o,_,(function(e){e.showCoords=!e.showCoords})),Object(h["a"])(o,C,(function(e,t){e.names[t.color]=e.names[t.color]?"":t.name})),o),j={resetGame:function(e){var t=e.commit;t(u)},setPresets:function(e,t){var l=e.commit;l(w,t)},changeSize:function(e,t){var l=e.commit;l(p,t)},switchMove:function(e){var t=e.commit;t(b)},revertMove:function(e){var t=e.commit;t(d)},whiteFirst:function(e){var t=e.commit;t(k)},toggleBlind:function(e){var t=e.commit;t(v)},toggleColorless:function(e){var t=e.commit;t(f)},toggleCoords:function(e){var t=e.commit;t(_)},changeCaptives:function(e,t){var l=e.commit;l(m,t)},changeName:function(e,t){var l=e.commit;l(g,t)},toggleSeat:function(e,t){var l=e.commit;l(C,t)}},S=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("div",{staticClass:"container justify-content-center"},[l("div",{staticClass:"row"},[l("app-goban"),l("app-controls")],1)]),l("welcome-modal")],1)},M=[],y=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"col col-12 col-lg-5"},[l("p",{staticClass:"text-center h5"},[e._v(" Пленники: "),l("span",{attrs:{"aria-label":"белых"}},[e._v("⚫")]),e._v(e._s(e.captives.black)+" "),l("span",{attrs:{"aria-label":"черных"}},[e._v("⚪")]),e._v(e._s(e.captives.white)+" ")]),l("div",{staticClass:"my-2 controls"},[l("b-button-toolbar",{staticClass:"d-flex justify-content-start",attrs:{"aria-label":"Меню гобана"}},[l("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:e.newGame}},[e._v("Новая игра")]),l("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:e.revert}},[e._v("Вернуть ход")]),l("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:e.changeName}},[e._v("Поменять ник")]),l("b-dropdown",{staticClass:"m-1",attrs:{variant:"dark",right:"",text:"Выбрать пресет"}},[l("b-dropdown-item",{on:{click:function(t){return e.preset("atari")}}},[e._v("Атари-го")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("corner")}}},[e._v("Выживание в углу")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("full")}}},[e._v("Выживание по всей доске")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("center")}}},[e._v("Выживание в центре")]),l("b-dropdown-item",{on:{click:function(t){return e.preset("colorless")}}},[e._v("Одноцветное го")])],1),l("b-form-checkbox",{staticClass:"m-1 d-none d-md-block",attrs:{name:"check-button",size:"lg",switch:""},on:{change:e.toggleCoords},model:{value:e.showCoords,callback:function(t){e.showCoords=t},expression:"showCoords"}},[e._v(" Показывать координаты ")]),l("b-form-checkbox",{staticClass:"m-1 d-none d-md-block",attrs:{name:"check-button",size:"lg",switch:""},on:{change:e.toggleBlind},model:{value:e.blind,callback:function(t){e.blind=t},expression:"blind"}},[e._v(" Игра вслепую ")])],1),l("div",[e._v(" Черный: "+e._s(e.names.black||"свободно")+" "),l("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:function(t){return e.toggleSeat("black")}}},[e._v(" "+e._s(e.names.black?"Покинуть место":"Занять место")+" ")])],1),l("div",[e._v(" Белый: "+e._s(e.names.white||"свободно")+" "),l("b-button",{staticClass:"m-1",attrs:{variant:"light"},on:{click:function(t){return e.toggleSeat("white")}}},[e._v(" "+e._s(e.names.white?"Покинуть место":"Занять место")+" ")])],1)],1)])},$=[],z=(l("d3b7"),{name:"Controls",computed:Object(n["a"])({},Object(c["b"])(["showCoords","blind","captives","currName","names"])),methods:{newGame:function(){var e=this;return new Promise((function(t){e.$bvModal.msgBoxConfirm("Вы уверены?",{okVariant:"info",cancelVariant:"outline-dark",okTitle:"Да, начать новую игру",cancelTitle:"Нет, вернуться",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(l){l&&(e.$store.dispatch("resetGame"),t(!0)),t(!1)}))}))},revert:function(){this.$store.dispatch("revertMove")},changeName:function(){this.$bvModal.show("welcome-modal")},preset:function(e){var t=this;this.newGame().then((function(l){l&&t.$store.dispatch("setPresets",e)}))},toggleCoords:function(){this.$store.dispatch("toggleCoords")},toggleBlind:function(){this.$store.dispatch("toggleBlind")},toggleSeat:function(e){var t="Неопознанная антилопа";this.currName?t=this.currName:this.$store.dispatch("changeName",t),this.$store.dispatch("toggleSeat",{color:e,name:t})}}}),E=z,G=(l("d49a"),l("2877")),P=Object(G["a"])(E,y,$,!1,null,"45df7980",null),B=P.exports,x=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"col col-12 col-lg-7 justify-content-center mb-3"},[l("div",{staticClass:"container container-fluid goban"},[e.showCoords?l("div",{staticClass:"d-flex justify-content-center"},e._l(e.size,(function(t){return l("div",{key:t,staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))])})),0):e._e(),e._l(e.size,(function(t){return l("div",{key:t,staticClass:"d-flex justify-content-center"},[e.showCoords?l("div",{staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))]):e._e(),e._l(e.size,(function(o){return l("goban-cell",{key:t+o,attrs:{move:e.isBlacksMove,row:t,cell:o,blind:e.blind,stone:e.hasStone(t,o),last:e.hasStone(t,o)&&e.isLastMove(t,o),size:e.size},on:{stone:e.placeStone}})})),e.showCoords?l("div",{staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))]):e._e()],2)})),e.showCoords?l("div",{staticClass:"d-flex justify-content-center"},e._l(e.size,(function(t){return l("div",{key:t,staticClass:"legend__item d-none d-md-block"},[e._v(e._s(t))])})),0):e._e()],2)])},N=[],T=(l("a623"),l("4de4"),l("7db0"),l("c740"),l("4160"),l("a434"),l("159b"),l("53ca")),A=l("2909"),L={atari:{black:[{row:9,cell:11},{row:10,cell:10}],white:[{row:9,cell:10},{row:10,cell:11}]},corner:{black:[{row:10,cell:1},{row:10,cell:2},{row:10,cell:3},{row:10,cell:4},{row:10,cell:5},{row:10,cell:6},{row:10,cell:7},{row:10,cell:8},{row:10,cell:9},{row:10,cell:10},{row:1,cell:10},{row:2,cell:10},{row:3,cell:10},{row:4,cell:10},{row:5,cell:10},{row:6,cell:10},{row:7,cell:10},{row:8,cell:10},{row:9,cell:10},{row:10,cell:10}]},center:{black:[{row:1,cell:2},{row:1,cell:3},{row:1,cell:4},{row:1,cell:5},{row:1,cell:6},{row:1,cell:7},{row:1,cell:8},{row:1,cell:9},{row:1,cell:10},{row:1,cell:11},{row:1,cell:12},{row:1,cell:13},{row:1,cell:14},{row:1,cell:15},{row:1,cell:16},{row:1,cell:17},{row:1,cell:18},{row:19,cell:2},{row:19,cell:3},{row:19,cell:4},{row:19,cell:5},{row:19,cell:6},{row:19,cell:7},{row:19,cell:8},{row:19,cell:9},{row:19,cell:10},{row:19,cell:11},{row:19,cell:12},{row:19,cell:13},{row:19,cell:14},{row:19,cell:15},{row:19,cell:16},{row:19,cell:17},{row:19,cell:18},{row:2,cell:1},{row:3,cell:1},{row:4,cell:1},{row:5,cell:1},{row:6,cell:1},{row:7,cell:1},{row:8,cell:1},{row:9,cell:1},{row:10,cell:1},{row:11,cell:1},{row:12,cell:1},{row:13,cell:1},{row:14,cell:1},{row:15,cell:1},{row:16,cell:1},{row:17,cell:1},{row:18,cell:1},{row:2,cell:19},{row:3,cell:19},{row:4,cell:19},{row:5,cell:19},{row:6,cell:19},{row:7,cell:19},{row:8,cell:19},{row:9,cell:19},{row:10,cell:19},{row:11,cell:19},{row:12,cell:19},{row:13,cell:19},{row:14,cell:19},{row:15,cell:19},{row:16,cell:19},{row:17,cell:19},{row:18,cell:19}]},full:{black:[{row:3,cell:3},{row:4,cell:4},{row:17,cell:3},{row:16,cell:4},{row:3,cell:17},{row:4,cell:16},{row:17,cell:17},{row:16,cell:16},{row:10,cell:4},{row:10,cell:3},{row:4,cell:10},{row:3,cell:10},{row:16,cell:10},{row:17,cell:10},{row:10,cell:16},{row:10,cell:17},{row:9,cell:10},{row:10,cell:9},{row:10,cell:11},{row:11,cell:10}]}},I=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:e.classes,on:{click:e.placeStone}},[!e.stone||e.blind&&!e.last?l("div",{staticClass:"preview",class:e.previewClass,on:{mouseenter:e.addPreview,focus:e.addPreview,touchstart:e.addPreview,mouseleave:e.removePreview,touchend:e.removePreview,blur:e.removePreview}}):l("div",{class:e.stoneClasses}),e.star?l("div",{staticClass:"star"}):e._e()])},H=[],R=(l("a9e3"),{name:"GobanCell.vue",props:{row:Number,cell:Number,stone:String,last:Boolean},data:function(){return{classes:["cell"],star:!1,previewClass:""}},methods:{placeStone:function(){this.$emit("stone",this.row,this.cell),this.removePreview()},addPreview:function(){this.allowedToPlay&&(this.previewClass=this.isBlacksMove?"preview_black":"preview_white")},removePreview:function(){this.previewClass=""}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["size","blind","isBlacksMove","allowedToPlay"])),{},{stoneClasses:function(){var e=this.last&&!this.blind?"last":"";return["stone",this.stone,e]}}),created:function(){this.removePreview(),1===this.row?this.classes.push("top"):this.row===this.size&&this.classes.push("bottom"),1===this.cell?this.classes.push("left"):this.cell===this.size&&this.classes.push("right"),(4===this.row&&4===this.cell||4===this.row&&this.cell===this.size-3||this.row===this.size-3&&4===this.cell||this.row===this.size-3&&this.cell===this.size-3)&&(this.star=!0),this.size>=13&&(this.row===Math.ceil(this.size/2)&&this.cell===Math.ceil(this.size/2)||this.row===Math.ceil(this.size/2)&&4===this.cell||this.row===Math.ceil(this.size/2)&&this.cell===this.size-3||4===this.row&&this.cell===Math.ceil(this.size/2)||this.row===this.size-3&&this.cell===Math.ceil(this.size/2))&&(this.star=!0)}}),V=R,F=(l("dcd8"),Object(G["a"])(V,I,H,!1,null,"5096258e",null)),W=F.exports,D={name:"Goban.vue",components:{"goban-cell":W},data:function(){return{publicPath:"/static/goban/",black:[],white:[],currentGroup:[],log:[]}},computed:Object(n["a"])({},Object(c["b"])(["size","isBlacksMove","showCoords","blind","colorless","captives","allowedToPlay"])),methods:{newGame:function(){this.black=[],this.white=[],this.currentGroup=[],this.log=[]},placeStone:function(e,t){var l=this;if(!this.hasStone(e,t)&&this.allowedToPlay){var o=this.isBlacksMove?"black":"white",s=this.isBlacksMove?"white":"black";this[o].push({row:e,cell:t});var c=this.getConnectedCoords(e,t,s);if(c.forEach((function(e){l.currentGroup=[],l.isSurrounded(e.row,e.cell,s)&&l.removeGroup(l.currentGroup,s,o)})),this.currentGroup=[],this.isSurrounded(e,t,o))this[o].pop();else{if(this.log.length>6&&this.isKo())return this.$store.dispatch("changeCaptives",{color:"black",number:this.log[this.log.length-1].captives.black}),this.$store.dispatch("changeCaptives",{color:"white",number:this.log[this.log.length-1].captives.black}),this.black=Object(A["a"])(this.log[this.log.length-1].black),void(this.white=Object(A["a"])(this.log[this.log.length-1].white));this.playStoneSound(),this.log.push({black:Object(A["a"])(this.black),white:Object(A["a"])(this.white),captives:Object(n["a"])({},this.captives)}),this.$store.dispatch("switchMove")}}},hasBlackStone:function(e,t){return!!this.black.filter((function(l){return l.row===e&&l.cell===t})).length},hasWhiteStone:function(e,t){return!!this.white.filter((function(l){return l.row===e&&l.cell===t})).length},hasStone:function(e,t){return this.hasWhiteStone(e,t)?"white":this.hasBlackStone(e,t)?this.colorless?"white":"black":e>this.size||e<1||t>this.size||t<1?"edge":null},getConnectedCoords:function(e,t,l){return this[l].filter((function(l){return l.row===e&&l.cell===t+1||l.row===e+1&&l.cell===t||l.row===e-1&&l.cell===t||l.row===e&&l.cell===t-1}))},isSurrounded:function(e,t,l){var o=this;this.currentGroup.push({row:e,cell:t});var s=!this.hasStone(e+1,t)||!this.hasStone(e,t+1)||!this.hasStone(e-1,t)||!this.hasStone(e,t-1);if(s)return!1;var c=this.getConnectedCoords(e,t,l);return 0===c.length||c.every((function(e){return!!o.currentGroup.find((function(t){return t.row===e.row&&t.cell===e.cell}))||o.isSurrounded(e.row,e.cell,l)}))},removeGroup:function(e,t,l){var o=this;e.forEach((function(e){var s=o[t].findIndex((function(t){return t.row===e.row&&t.cell===e.cell}));o[t].splice(s,1),o.$store.dispatch("changeCaptives",{color:l,number:o.captives[l]+1})}))},isKo:function(){var e=this,t=this.log[this.log.length-2].black,l=this.log[this.log.length-2].white;if(this.black.length!==t.length||this.white.length!==l.length)return!1;for(var o=function(l){if(!t.find((function(t){return t.row===e.black[l].row&&t.cell===e.black[l].cell})))return{v:!1}},s=0;s<this.black.length;s++){var c=o(s);if("object"===Object(T["a"])(c))return c.v}for(var i=function(t){if(!l.find((function(l){return l.row===e.white[t].row&&l.cell===e.black[t].cell})))return{v:!1}},r=0;r<this.white;r++){var n=i(r);if("object"===Object(T["a"])(n))return n.v}return!0},revert:function(){this.log.length>1?(this.black=Object(A["a"])(this.log[this.log.length-2].black),this.white=Object(A["a"])(this.log[this.log.length-2].white),this.$store.dispatch("changeCaptives",{color:"black",number:this.log[this.log.length-2].captives.black}),this.$store.dispatch("changeCaptives",{color:"white",number:this.log[this.log.length-2].captives.white})):(this.black=[],this.white=[],this.$store.dispatch("changeCaptives",{color:"black",number:0}),this.$store.dispatch("changeCaptives",{color:"white",number:0})),this.log.pop()},setExercise:function(e){if(!(this.log.length||this.black.length||this.white.length)){switch(e){case"atari":this.black=Object(A["a"])(L.atari.black),this.white=Object(A["a"])(L.atari.white);break;case"corner":this.black=Object(A["a"])(L.corner.black),this.white=[],this.$store.dispatch("whiteFirst");break;case"center":this.black=Object(A["a"])(L.center.black),this.white=[],this.$store.dispatch("whiteFirst");break;case"full":this.black=Object(A["a"])(L.full.black),this.white=[],this.$store.dispatch("whiteFirst");break;case"colorless":this.$store.dispatch("toggleColorless");default:this.black=[],this.white=[]}this.$store.dispatch("changeCaptives",{color:"black",number:0}),this.$store.dispatch("changeCaptives",{color:"white",number:0}),this.log.push({black:Object(A["a"])(this.black),white:Object(A["a"])(this.white),captives:Object(n["a"])({},this.captives)})}},isLastMove:function(e,t){return this.blind?e===this.black[this.black.length-1].row&&t===this.black[this.black.length-1].cell||e===this.white[this.white.length-1].row&&t===this.white[this.white.length-1].cell:this.isBlacksMove?e===this.white[this.white.length-1].row&&t===this.white[this.white.length-1].cell:e===this.black[this.black.length-1].row&&t===this.black[this.black.length-1].cell},playStoneSound:function(){var e=new Audio("".concat(this.publicPath,"stone.mp3"));e.play()}},created:function(){var e=this;this.$store.subscribe((function(t){switch(t.type){case u:e.newGame();break;case d:e.revert();break;case w:e.setExercise(t.payload);break}}))}},J=D,K=(l("8629"),Object(G["a"])(J,x,N,!1,null,"3dd979fc",null)),Z=K.exports,q=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("b-modal",{attrs:{id:"welcome-modal"},on:{ok:e.submit}},[e._v(" Ваш ник: "),l("b-form-input",{attrs:{placeholder:"Ник"},on:{submit:e.submit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},Q=[],U={data:function(){return{value:""}},computed:Object(n["a"])({},Object(c["b"])(["names","currName"])),methods:{submit:function(){this.names.black===this.currName?(this.$store.dispatch("toggleSeat",{color:"black"}),this.$store.dispatch("toggleSeat",{color:"black",name:this.value})):this.names.white===this.currName&&(this.$store.dispatch("toggleSeat",{color:"white"}),this.$store.dispatch("toggleSeat",{color:"white",name:this.value})),this.$store.dispatch("changeName",this.value),this.$bvModal.hide("welcome-modal")}},mounted:function(){this.currName||this.$bvModal.show("welcome-modal")}},X=U,Y=Object(G["a"])(X,q,Q,!1,null,null,null),ee=Y.exports,te={name:"App",components:{"app-goban":Z,"app-controls":B,"welcome-modal":ee}},le=te,oe=(l("034f"),Object(G["a"])(le,S,M,!1,null,null,null)),se=oe.exports;s["default"].config.productionTip=!1,s["default"].use(i["a"]),s["default"].use(c["a"]);var ce=new c["a"].Store({state:r,getters:a,mutations:O,actions:j});new s["default"]({render:function(e){return e(se)},store:ce}).$mount("#app")},"85ec":function(e,t,l){},8629:function(e,t,l){"use strict";var o=l("c6f7"),s=l.n(o);s.a},9015:function(e,t,l){},a347:function(e,t,l){},c6f7:function(e,t,l){},d49a:function(e,t,l){"use strict";var o=l("9015"),s=l.n(o);s.a},dcd8:function(e,t,l){"use strict";var o=l("02dc"),s=l.n(o);s.a}});
//# sourceMappingURL=app.34ac5b66.js.map